MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var t=MathJax.ElementJax.mml,e=MathJax.OutputJax.SVG,i=e.BBOX,a={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},n={linebreakstyle:"after"};t.mrow.Augment({SVGmultiline:function(i){for(var s=this;s.inferred||s.parent&&"mrow"===s.parent.type&&s.isEmbellished();)s=s.parent;var l="math"===s.type&&"block"===s.Get("display")||"mtd"===s.type;s.isMultiline=!0;var d=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");d.linebreakstyle===t.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(d.linebreakstyle=this.Get("infixlinebreakstyle")),d.lineleading=e.length2em(d.lineleading,1,.5),i=this.SVG(),l&&"mtd"!==s.type&&(e.linebreakWidth<e.BIGDIMEN?i.w=e.linebreakWidth:i.w=e.cwidth);for(var h={n:0,Y:0,scale:this.scale||1,isTop:l,values:{},VALUES:d},r=this.SVGgetAlign(h,{}),S=this.SVGgetShift(h,{},r),o=[],f={index:[],penalty:a.nobreak,w:0,W:S,shift:S,scanW:S,nest:0},c=!1;this.SVGbetterBreak(f,h)&&(f.scanW>=e.linebreakWidth||f.penalty===a.newline);)this.SVGaddLine(i,o,f.index,h,f.values,c),o=f.index.slice(0),c=!0,r=this.SVGgetAlign(h,f.values),S=this.SVGgetShift(h,f.values,r),r===t.INDENTALIGN.CENTER&&(S=0),f.W=f.shift=f.scanW=S,f.penalty=a.nobreak;return h.isLast=!0,this.SVGaddLine(i,o,[],h,n,c),this.SVGhandleSpace(i),this.SVGhandleColor(i),i.isMultiline=!0,this.SVGsaveData(i),i}}),t.mbase.Augment({SVGlinebreakPenalty:a,SVGbetterBreak:function(t,i){if(this.isToken)return!1;if(this.isEmbellished())return t.embellished=this,this.CoreMO().SVGbetterBreak(t,i);if(this.linebreakContainer)return!1;var n,s,l,d=t.index.slice(0),h=t.index.shift(),r=this.data.length,S=t.index.length>0,o=!1;for(null==h&&(h=-1),S||(h++,t.W+=t.w,t.w=0),l=t.scanW=t.W,t.nest++;h<r&&t.scanW<1.33*e.linebreakWidth;){if(this.data[h]){if(this.data[h].SVGbetterBreak(t,i)&&(o=!0,d=[h].concat(t.index),n=t.W,s=t.w,t.penalty===a.newline))return t.index=d,t.nest&&t.nest--,!0;l=S?t.scanW:this.SVGaddWidth(h,t,l)}t.index=[],h++,S=!1}return t.nest&&t.nest--,t.index=d,o&&(t.W=n),o},SVGaddWidth:function(t,e,i){if(this.data[t]){var a=this.data[t].SVGdata;i+=a.w+a.x,a.X&&(i+=a.X),e.W=e.scanW=i,e.w=0}return i},SVGaddLine:function(t,a,n,s,l,d){var h=i();s.first=d,s.last=!0,this.SVGmoveLine(a,n,h,s,l),h.Clean();var r=this.SVGgetAlign(s,l),S=this.SVGgetShift(s,l,r);if(s.n>0){var o=e.FONTDATA.baselineskip*s.scale,f=(null==s.values.lineleading?s.VALUES:s.values).lineleading*s.scale;s.Y-=Math.max(o,s.d+h.h+f)}h.w+S>t.w&&(t.w=h.w+S),t.Align(h,r,0,s.Y,S),s.d=h.d,s.values=l,s.n++},SVGgetAlign:function(e,i){var a,n=i,s=e.values,l=e.VALUES;return a=0===e.n?n.indentalignfirst||s.indentalignfirst||l.indentalignfirst:e.isLast?s.indentalignlast||l.indentalignlast:s.indentalign||l.indentalign,a===t.INDENTALIGN.INDENTALIGN&&(a=s.indentalign||l.indentalign),a===t.INDENTALIGN.AUTO&&(a=e.isTop?this.displayAlign:t.INDENTALIGN.LEFT),a},SVGgetShift:function(i,a,n){var s,l=a,d=i.values,h=i.VALUES;if(s=0===i.n?l.indentshiftfirst||d.indentshiftfirst||h.indentshiftfirst:i.isLast?d.indentshiftlast||h.indentshiftlast:d.indentshift||h.indentshift,s===t.INDENTSHIFT.INDENTSHIFT&&(s=d.indentshift||h.indentshift),"auto"!==s&&""!==s||(s="0"),s=e.length2em(s,1,e.cwidth),i.isTop&&"0"!==this.displayIndent){var r=e.length2em(this.displayIndent,1,e.cwidth);s+=n===t.INDENTALIGN.RIGHT?-r:r}return s},SVGmoveLine:function(t,e,i,a,n){var s=t[0],l=e[0];if(null==s&&(s=-1),null==l&&(l=this.data.length-1),s===l&&t.length>1)this.data[s].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft");else{var d=a.last;for(a.last=!1;s<l;)this.data[s]&&(t.length<=1?this.data[s].SVGmove(i,a,n):this.data[s].SVGmoveSlice(t.slice(1),[],i,a,n,"paddingLeft")),s++,a.first=!1,t=[];a.last=d,this.data[s]&&(e.length<=1?this.data[s].SVGmove(i,a,n):this.data[s].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight"))}},SVGmoveSlice:function(t,e,a,n,s,l){var d=i();return this.SVGmoveLine(t,e,d,n,s),d.Clean(),this.href&&this.SVGaddHref(d),this.SVGhandleColor(d),a.Add(d,a.w,0,!0),d},SVGmove:function(e,i,a){if(!i.first&&!i.last||i.first&&i.values.linebreakstyle===t.LINEBREAKSTYLE.BEFORE||i.last&&a.linebreakstyle===t.LINEBREAKSTYLE.AFTER){var n=this.toSVG(this.SVGdata.HW,this.SVGdata.D);(i.first||i.nextIsFirst)&&(n.x=0),i.last&&n.X&&(n.X=0),e.Add(n,e.w,0,!0)}i.first&&n&&0===n.w?i.nextIsFirst=!0:delete i.nextIsFirst}}),t.mfenced.Augment({SVGbetterBreak:function(t,i){var n,s,l,d=t.index.slice(0),h=t.index.shift(),r=this.data.length,S=t.index.length>0,o=!1;if(null==h&&(h=-1),S||(h++,t.W+=t.w,t.w=0),l=t.scanW=t.W,t.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),r&&this.dataI.push(0);for(var f=1;f<r;f++)this.data["sep"+f]&&this.dataI.push("sep"+f),this.dataI.push(f);this.data.close&&this.dataI.push("close")}for(r=this.dataI.length;h<r&&t.scanW<1.33*e.linebreakWidth;){var c=this.dataI[h];if(this.data[c]){if(this.data[c].SVGbetterBreak(t,i)&&(o=!0,d=[h].concat(t.index),n=t.W,s=t.w,t.penalty===a.newline))return t.index=d,t.nest&&t.nest--,!0;l=S?t.scanW:this.SVGaddWidth(h,t,l)}t.index=[],h++,S=!1}return t.nest&&t.nest--,t.index=d,o&&(t.W=n,t.w=s),o},SVGmoveLine:function(t,e,i,a,n){var s=t[0],l=e[0];if(null==s&&(s=-1),null==l&&(l=this.dataI.length-1),s===l&&t.length>1)this.data[this.dataI[s]].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft");else{var d=a.last;a.last=!1;for(var h=this.dataI[s];s<l;)this.data[h]&&(t.length<=1?this.data[h].SVGmove(i,a,n):this.data[h].SVGmoveSlice(t.slice(1),[],i,a,n,"paddingLeft")),s++,h=this.dataI[s],a.first=!1,t=[];a.last=d,this.data[h]&&(e.length<=1?this.data[h].SVGmove(i,a,n):this.data[h].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight"))}}}),t.msubsup.Augment({SVGbetterBreak:function(t,e){if(!this.data[this.base])return!1;var i,n,s,l=t.index.slice(0),d=t.index.shift(),h=t.index.length>0,r=!1;return h||(t.W+=t.w,t.w=0),s=t.scanW=t.W,null==d&&(this.SVGdata.dw=this.SVGdata.w-this.data[this.base].SVGdata.w),this.data[this.base].SVGbetterBreak(t,e)&&(r=!0,l=[this.base].concat(t.index),i=t.W,n=t.w,t.penalty===a.newline&&(r=h=!0)),h||this.SVGaddWidth(this.base,t,s),t.scanW+=this.SVGdata.dw,t.W=t.scanW,t.index=[],r&&(t.W=i,t.w=n,t.index=l),r},SVGmoveLine:function(t,e,i,a,n){if(this.data[this.base]&&(t.length>1?this.data[this.base].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft"):e.length<=1?this.data[this.base].SVGmove(i,a,n):this.data[this.base].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight")),0===e.length){var s,l=this.data[this.sup],d=this.data[this.sub],h=i.w;l&&(s=l.SVGdata||{},i.Add(l.toSVG(),h+(s.dx||0),s.dy)),d&&(s=d.SVGdata||{},i.Add(d.toSVG(),h+(s.dx||0),s.dy))}}}),t.mmultiscripts.Augment({SVGbetterBreak:function(t,e){if(!this.data[this.base])return!1;var i=t.index.slice(0);t.index.shift();var n,s,l,d=t.index.length>0,h=!1;d||(t.W+=t.w,t.w=0),t.scanW=t.W;var r=this.SVGdata.w-this.data[this.base].SVGdata.w-this.SVGdata.dx;return t.scanW+=this.SVGdata.dx,l=t.scanW,this.data[this.base].SVGbetterBreak(t,e)&&(h=!0,i=[this.base].concat(t.index),n=t.W,s=t.w,t.penalty===a.newline&&(h=d=!0)),d||this.SVGaddWidth(this.base,t,l),t.scanW+=r,t.W=t.scanW,t.index=[],h&&(t.W=n,t.w=s,t.index=i),h},SVGmoveLine:function(t,e,i,a,n){var s,l=this.SVGdata;if(t.length<1){this.scriptBox=this.SVGgetScripts(this.SVGdata.s);var d=this.scriptBox[2],h=this.scriptBox[3];s=i.w+l.dx,h&&i.Add(h,s+l.delta-h.w,l.u),d&&i.Add(d,s-d.w,-l.v)}if(this.data[this.base]&&(t.length>1?this.data[this.base].SVGmoveSlice(t.slice(1),e.slice(1),i,a,n,"paddingLeft"):e.length<=1?this.data[this.base].SVGmove(i,a,n):this.data[this.base].SVGmoveSlice([],e.slice(1),i,a,n,"paddingRight")),0===e.length){var r=this.scriptBox[0],S=this.scriptBox[1];s=i.w+l.s,S&&i.Add(S,s,l.u),r&&i.Add(r,s-l.delta,-l.v),delete this.scriptBox}}}),t.mo.Augment({SVGbetterBreak:function(i,n){if(i.values&&i.values.last===this)return!1;var s=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");s.linebreakstyle===t.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(s.linebreakstyle=this.Get("infixlinebreakstyle")),s.texClass===t.TEXCLASS.OPEN&&i.nest++,s.texClass===t.TEXCLASS.CLOSE&&i.nest&&i.nest--;var l=i.scanW,d=i.embellished;delete i.embellished,d&&d.SVGdata||(d=this);var h=d.SVGdata,r=h.w+h.x;if(s.linebreakstyle===t.LINEBREAKSTYLE.AFTER&&(l+=r,r=0),l-i.shift===0&&s.linebreak!==t.LINEBREAK.NEWLINE)return!1;var S=e.linebreakWidth-l;if(0===n.n&&(s.indentshiftfirst!==n.VALUES.indentshiftfirst||s.indentalignfirst!==n.VALUES.indentalignfirst)){var o=this.SVGgetAlign(n,s),f=this.SVGgetShift(n,s,o);S+=i.shift-f}var c=Math.floor(S/e.linebreakWidth*1e3);c<0&&(c=a.toobig-3*c),s.fence&&(c+=a.fence),(s.linebreakstyle===t.LINEBREAKSTYLE.AFTER&&s.texClass===t.TEXCLASS.OPEN||s.texClass===t.TEXCLASS.CLOSE)&&(c+=a.close),c+=i.nest*a.nestfactor;var u=a[s.linebreak||t.LINEBREAK.AUTO];return MathJax.Object.isArray(u)?c=Math.max(1,c+u[0]*i.nest):S>=0&&(c=u*i.nest),!(c>=i.penalty)&&(i.penalty=c,i.values=s,i.W=l,i.w=r,s.lineleading=e.length2em(s.lineleading,1,n.VALUES.lineleading),s.last=this,!0)}}),t.mspace.Augment({SVGbetterBreak:function(i,n){if(i.values&&i.values.last===this)return!1;var s=this.getValues("linebreak"),l=s.linebreak;l&&!this.hasDimAttr()||(l=t.LINEBREAK.AUTO);var d=i.scanW,h=this.SVGdata,r=h.w+h.x;if(d-i.shift===0)return!1;var S=e.linebreakWidth-d,o=Math.floor(S/e.linebreakWidth*1e3);o<0&&(o=a.toobig-3*o),o+=i.nest*a.nestfactor;var f=a[l];return l===t.LINEBREAK.AUTO&&r>=1e3*a.spacelimit&&!this.mathbackground&&!this.backrgound&&(f=[(r/1e3+a.spaceoffset)*a.spacefactor]),MathJax.Object.isArray(f)?o=Math.max(1,o+f[0]*i.nest):S>=0&&(o=f*i.nest),!(o>=i.penalty)&&(i.penalty=o,i.values=s,i.W=d,i.w=r,s.lineleading=n.VALUES.lineleading,s.linebreakstyle="before",s.last=this,!0)}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){t.TeXmathchoice.Augment({SVGbetterBreak:function(t,e){return this.Core().SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.Core().SVGmoveSlice(t,e,i,a,n)}})}),t.maction.Augment({SVGbetterBreak:function(t,e){return this.Core().SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.Core().SVGmoveSlice(t,e,i,a,n)}}),t.semantics.Augment({SVGbetterBreak:function(t,e){return!!this.data[0]&&this.data[0].SVGbetterBreak(t,e)},SVGmoveLine:function(t,e,i,a,n){return this.data[0]?this.data[0].SVGmoveSlice(t,e,i,a,n):null}}),MathJax.Hub.Startup.signal.Post("SVG multiline Ready"),MathJax.Ajax.loadComplete(e.autoloadDir+"/multiline.js")});
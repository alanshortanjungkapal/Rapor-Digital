{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Module/EventManager.js","webpack:///./src/Module/GalleryModal.js","webpack:///./src/Module/DataManager.js","webpack:///./src/Module/SummernoteGallery.js","webpack:///./src/index.js","webpack:///./src/Module/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EventManager","this","events_queue","event_name","closure","Array","isArray","push","params","events","length","apply","GalleryModal","options","$","extend","loadOnScroll","maxHeight","title","close_text","ok_text","selectAll_text","deselectAll_text","noImageSelected_msg","event","template","getModalTemplate","$modal","hide","select_class","addStyleToDom","setOptions","attachEvents","find","css","html","data","page","page_images","createImages","append","$content","_this","$image","onload","siblings","click","toggleClass","attr","src","$item","prepend","message_text","permanent","$message","setTimeout","show","$modal_body","$selected_img","modal","trigger","each","index","el","removeClass","showError","on","addClass","scroll","$images_list","scrollTop","height","$images_container","header_content","parseInt","fn","Constructor","VERSION","join","reverse","$css","appendTo","DataManager","url","responseDataKey","nextPageKey","init","response","current_page","is_fetching_locked","fetch_url","fetch_type","next_link","lockFetching","dotted_key","default_val","split","reduce","item","isEmptyObject","getObjectKeyByString","current_link","ajax","beforeSend","xhr","request_link","always","unlockFetching","done","status_text","parsed_response","parseResponse","setNextFetch","fail","fetchData","SummernoteGallery","button_label","tooltip","plugin_default_options","last_focused_el","editor","editable","range","document","createRange","sel","window","getSelection","cursor_position","setStart","collapse","removeAllRanges","addRange","focus","focused_element","focusNode","parent","contains","saveLastFocusedElement","context","layoutInfo","note","plugin_options","data_manager","source","attachModalEvents","attachEditorEvents","gallery_modal","recoverEditorFocus","invoke","fetchNext","clearContent","summernote","ui","button","contents","openGallery","render","showLoading","link","addImages","imagesContainerHasScroll","hideLoading","error","attachDataEvents","open","gallery_plugin","plugin","summernote_gallery","memo","createButton","we","e","initialize","initGallery","plugins","getPlugin"],"mappings":"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","file":"summernote-gallery.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default class EventManager {\n    constructor() {\n        // events store\n        this.events_queue = {};\n    }\n\n    // Register an event\n    on(event_name, closure) {\n        if (! Array.isArray(this.events_queue[event_name]) ) {\n            this.events_queue[event_name] = [];\n        }\n\n        this.events_queue[event_name].push(closure);\n\n        return this;\n    }\n\n    // Fire an event\n    trigger(event_name, params) {\n        var events = this.events_queue[event_name] || [];\n\n        for (var i = 0; i < events.length; i++) {\n            events[i].apply(this, params);\n        }\n\n        return this;\n    }\n\n    clearAll() {\n        this.events_queue = {};\n\n        return this;\n    }\n}","import EventManager from './EventManager'\n\nexport default class GalleryModal {\n\n    constructor(options) {\n        this.options = $.extend({\n            // load more data on modal scroll\n            loadOnScroll: false,\n\n            // modal max height\n            maxHeight: 500,\n\n            // modal title\n            title: 'summernote image gallery',\n\n            // close button text\n            close_text: 'Close',\n\n            // save button text\n            ok_text: 'Add',\n\n            // select all button text\n            selectAll_text: 'Select all',\n\n            // deselect all button text\n            deselectAll_text: 'Deselect all',\n\n            // message error to display when no image is selected\n            noImageSelected_msg: 'One image at least must be selected.'\n        }, options);\n\n        this.event = new EventManager();\n\n        this.template = this.getModalTemplate();\n        this.$modal = $(this.template).hide();\n\n        // class to add to image when selected\n        this.select_class = \"selected-img\";\n\n        this.addStyleToDom();\n        this.setOptions();\n\n        this.attachEvents();\n    }\n\n    setOptions() {\n        this.$modal.find('.modal-body').css('max-height', this.options.maxHeight);\n        this.$modal.find('.modal-title').html(this.options.title);\n        this.$modal.find('#close').html(this.options.close_text);\n        this.$modal.find('#save').html(this.options.ok_text);\n        this.$modal.find('#select-all').html(this.options.selectAll_text);\n        this.$modal.find('#deselect-all').html(this.options.deselectAll_text);\n    }\n\n    // append images to the modal with data object\n    addImages(data, page) {\n\n        var page_images = this.createImages(data, page);\n        var $images_list = this.$modal.find('.images-list');\n\n        if ($images_list.find('.img-item').length) {\n            this.$modal.find('.images-list').append(page_images);\n        } else {\n            this.$modal.find('.images-list').html(page_images);\n        }\n    }\n\n    // generate image elements from data object\n    createImages(data, page) {\n        var attributes = page ? 'class=\"page-content\" data-page\"' + page + '\"' : '';\n        var $content = $('<div ' + attributes + '></div>');\n        var _this = this;\n\n        for (var i = 0; i < data.length; i++) {\n\n            var $image = $('<img class=\"col-md-12 thumbnail\" title=\"'+ data[i].title +'\"/>');\n\n            $image.get(0).onload = function() {\n                $(this).siblings('.loading').hide()\n                $(this).click(function(event) {\n                    $(this).toggleClass(_this.select_class);\n                });\n            }\n\n            $image.attr('src', data[i].src);\n\n            var $item = $('<div class=\"col-md-2 img-item\">'\n                            +'<i class=\"fa fa-check\"></i>'\n                            +'<span class=\"loading\">'\n                                +'<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>'\n                            +'</span>'\n                        +'</div>');\n\n            $item.prepend($image);\n            $content.append($item)\n        }\n\n        return $content;\n    }\n\n    showError(message_text, permanent) {\n        var $message = this.$modal.find('.message');\n\n        $message.html('<span class=\"alert alert-danger\">' + message_text + '</span>');\n\n        if (!permanent) {\n            setTimeout(function () {\n                $message.html('');\n            }, 5000);\n        }\n    }\n\n    showLoading () {\n        this.$modal.find('.modal-footer .loading').show();\n    }\n\n    hideLoading () {\n        this.$modal.find('.modal-footer .loading').hide();\n    }\n\n    attachEvents() {\n        var _this = this;\n        var $modal = this.$modal;\n        var $modal_body = $modal.find('.modal-body');\n\n        $modal.find(\"button#save\").click(function(event) {\n            var $selected_img = $modal.find('.img-item img.' + _this.select_class);\n\n            if (! $selected_img.length) {\n                _this.showError(_this.options.noImageSelected_msg);\n                return;\n            }\n\n            $modal.modal('hide')\n\n            _this.event.trigger('beforeSave', [_this]);\n\n            $selected_img.each(function(index, el) {\n                _this.event.trigger('save', [_this, $(this)]);\n\n                $(this).removeClass(_this.select_class);\n            });\n\n            _this.event.trigger('afterSave', [this]);\n        });\n\n        $modal.on('hidden.bs.modal', function () {\n            _this.event.trigger('close')\n        })\n\n        $modal.find(\"button#select-all\").click(function(event) {\n            $modal.find('img').addClass(_this.select_class);\n        });\n\n        $modal.find(\"button#deselect-all\").click(function(event) {\n            $modal.find('img').removeClass(_this.select_class);\n        });\n\n        $modal_body.scroll(function() {\n            var $images_list = $modal.find('.images-list');\n            var is_near_bottom = $modal_body.scrollTop() + $modal_body.height() >= $images_list.height() - 100;\n\n            if (is_near_bottom) {\n                _this.event.trigger('scrollBottom', [_this]);\n            }\n        });\n    }\n\n    open() {\n        this.$modal.modal();\n    }\n\n    clearContent() {\n        // Reset the initial html\n        this.$modal.find('.images-list').html('');\n    }\n\n    // whether the images container has enough content to show the vertical scroll\n    imagesContainerHasScroll() {\n        var $images_container = this.$modal.find('.modal-body');\n        var $images_list = $images_container.find('.images-list');\n\n        return $images_container.height() != $images_list.height();\n    }\n\n    getModalTemplate() {\n\n        var bootsrap_version = parseInt($.fn.modal.Constructor.VERSION);\n        var header_content = [\n            '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>',\n            '<h4 class=\"modal-title\">[gallery title]</h4>'\n        ];\n\n        var modal_html = ''+\n            '<div class=\"modal summernote-gallery fade\" tabindex=\"-1\" role=\"dialog\">'\n                + '<div class=\"modal-lg modal-dialog \">'\n                    + '<div class=\"modal-content\">'\n                        + '<div class=\"modal-header\">'\n                            + (bootsrap_version == 3 ? header_content.join('') : header_content.reverse().join(''))\n                        + '</div>'\n                        + '<div class=\"modal-body\">'\n                            + '<div class=\"row images-list\">'\n                            + '</div>'\n                        + '</div>'\n                        + '<div class=\"modal-footer\">'\n                            + '<span style=\"display: none;position: absolute;left: 10px;bottom: 10px;\" class=\"loading\" >'\n                                + '<i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>'\n                            + '</span >'\n                            + '<span style=\"display: inline-block; margin-right: 50px;\">'\n                                + '<button type=\"button\" id=\"deselect-all\" class=\"btn btn-default\">[Deselect-all]</button>'\n                                + '<button type=\"button\" id=\"select-all\" class=\"btn btn-default\">[select-all]</button>'\n                            + '</span >'\n                            + '<button type=\"button\" id=\"close\" class=\"btn btn-default\" data-dismiss=\"modal\">[Close]</button>'\n                            + '<button type=\"button\" id=\"save\" class=\"btn btn-primary\">[Add]</button>'\n                            + '<span class=\"message\" ></span >'\n                        + '</div>'\n                    + '</div>'\n                + '</div>'\n            + '</div>';\n\n        return modal_html;\n    }\n\n    addStyleToDom() {\n        this.$css = $('<style>'\n                        +'.img-item{'\n                            +'position : relative;'\n                        +'}'\n                        +'.img-item .fa-check{'\n                            +'position : absolute;'\n                            +'top : -10px;'\n                            +'right : 5px;'\n                            +'font-size: 30px;'\n                            +'color: #337AB7;'\n                        +'}'\n                        +'.img-item .thumbnail{'\n                            +'min-height : 119.66px;'\n                        +'}'\n                        +'.img-item .loading{'\n                            +'position: absolute;'\n                            +'margin: auto;'\n                            +'top: -20px;'\n                            +'bottom: 0;'\n                            +'display: block;'\n                            +'left: 0;'\n                            +'right: 0;'\n                            +'width: 60px;'\n                            +'height: 42px;'\n                            +'text-align: center;'\n                        +'}'\n                        +'.modal.summernote-gallery .message{'\n                            +'display: block;'\n                            +'padding: 30px 0 20px 0;'\n                        +'}'\n                        +'.modal.summernote-gallery .message:empty{'\n                            +'display: block;'\n                            +'padding: 0px!important;'\n                        +'}'\n                        +'.modal.summernote-gallery .modal-body{'\n                            +'overflow: scroll;'\n                        +'}'\n                        +'.img-item .fa-check{'\n                            +'display : none;'\n                        +'}'\n                        +'.img-item .'+ this.select_class +' + .fa-check{'\n                            +'display : block;'\n                        +'}'\n                        +'.'+ this.select_class +'{'\n                            +'background-color: #5CB85C;'\n                        +'}'\n                    +'</style>');\n        this.$css.appendTo('body');\n    }\n}","import EventManager from './EventManager'\n\nexport default class DataManager {\n\n    constructor(options) {\n        this.options = $.extend({\n            // full http url for fetching data\n            url: null,\n\n            // array of objects with 'src' and 'title' keys\n            data: [],\n\n            // the key name that holds the data array\n            responseDataKey: 'data',\n\n            // the key name that holds the next page link\n            nextPageKey: 'links.next',\n        }, options);\n\n        this.init();\n    }\n\n    init(response) {\n        this.current_page = 0;\n        this.is_fetching_locked = false;\n        this.event = new EventManager();\n        this.fetch_url = this.options.url;\n        this.fetch_type = this.options.data.length ? 'data' : (this.fetch_url ? 'url' : null);\n    }\n\n    // stop data fetching if neither next page link nor data were found\n    setNextFetch(response) {\n        if (response.next_link && response.data.length) {\n            this.fetch_url = response.next_link;\n        } else {\n            this.lockFetching();\n        }\n    }\n\n    lockFetching() {\n        this.is_fetching_locked = true;\n    }\n\n    unlockFetching() {\n        this.is_fetching_locked = false;\n    }\n\n    // get a key from object with dot notation, example: data.key.subkey.\n    getObjectKeyByString(object, dotted_key, default_val) {\n        var value = dotted_key.split('.').reduce(function (item, i) {\n            return item ? item[i] : {};\n        }, object);\n\n        if (typeof default_val == 'undefined') {\n            default_val = value;\n        }\n\n        return value && !$.isEmptyObject(value) ? value : default_val;\n    }\n\n    parseResponse(response) {\n\n        return {\n            data: this.getObjectKeyByString(response, this.options.responseDataKey, []),\n            next_link: this.getObjectKeyByString(response, this.options.nextPageKey, null)\n        };\n    }\n\n    fetchData() {\n        var _this = this;\n\n        if (this.fetch_type == 'data') {\n\n            this.event.trigger('beforeFetch');\n            this.event.trigger('fetch', [_this.options.data]);\n            this.event.trigger('afterFetch');\n\n        } else if (this.fetch_type == 'url') {\n\n            // Prevent simultaneous requests.\n            // Because we need to get the next page link from each request,\n            // they must be synchronous.\n            if (this.is_fetching_locked) return;\n\n            var current_link = _this.fetch_url;\n\n            this.event.trigger('beforeFetch');\n\n            this.lockFetching();\n\n            $.ajax({\n                url: current_link,\n                beforeSend:function(xhr){\n                    // set the request link to get it afterwards in the response\n                    xhr.request_link = current_link;\n                },\n            })\n            .always(function () {\n                // this is the first callback to be called when the request finishs\n                _this.unlockFetching();\n            })\n            .done(function(response, status_text, xhr){\n                var parsed_response = _this.parseResponse(response);\n                _this.current_page++;\n\n                //\n                _this.setNextFetch(parsed_response);\n\n                _this.event.trigger('fetch', [\n                    parsed_response.data,\n                    _this.current_page,\n                    xhr.request_link,\n                    parsed_response.next_link\n                ]);\n            })\n            .fail(function() {\n                _this.event.trigger('error', [\"problem loading from \" + current_link]);\n            })\n            .always(function () {\n                _this.event.trigger('afterFetch');\n            });\n\n        } else {\n            _this.event.trigger('error', [\"options 'data' or 'url' must be set\"]);\n        }\n    }\n\n    fetchNext() {\n        if (this.fetch_type == 'url') {\n            this.fetchData();\n        }\n    }\n}\n","import EventManager from './EventManager'\nimport GalleryModal from './GalleryModal'\nimport DataManager from './DataManager'\n\nexport default class SummernoteGallery {\n    constructor(options) {\n        this.options = $.extend({\n            name: 'summernote-gallery',\n            button_label: '<i class=\"fa fa-file-image-o\"></i>',\n            tooltip: 'summernote gallery'\n        }, options);\n\n        this.event = new EventManager();\n\n        this.plugin_default_options = {}\n    }\n\n    // set the focus to the last focused element in the editor\n    recoverEditorFocus() {\n        var last_focused_el = $(this.editor).data('last_focused_element');\n        if(typeof last_focused_el !== \"undefined\") {\n            var editor = this.editable;\n            var range = document.createRange();\n            var sel = window.getSelection();\n            var cursor_position =  last_focused_el.length;\n\n            range.setStart(last_focused_el, cursor_position);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n            editor.focus();\n        }\n    }\n\n    saveLastFocusedElement() {\n        var focused_element = window.getSelection().focusNode;\n        var parent = $(this.editable).get(0);\n        if ($.contains(parent, focused_element)) {\n            $(this.editor).data('last_focused_element', focused_element)\n        }\n    }\n\n    attachEditorEvents() {\n        var _this = this;\n\n        $(this.editable).on('keypress, mousemove', function() {\n            _this.saveLastFocusedElement();\n        })\n    }\n\n    initGallery(context) {\n        this.context = context;\n        this.editor = this.context.layoutInfo.note;\n        this.editable = this.context.layoutInfo.editable;\n        this.plugin_options = $.extend(\n            this.plugin_default_options,\n            this.context.options[this.options.name] || {}\n        );\n\n        this.modal = new GalleryModal(this.plugin_options.modal);\n        this.data_manager = new DataManager(this.plugin_options.source);\n\n        this.attachModalEvents();\n        this.attachEditorEvents();\n    }\n\n    attachModalEvents() {\n        var _this = this;\n\n        this.modal.event.on('beforeSave', function (gallery_modal) {\n            _this.recoverEditorFocus();\n        });\n\n        this.modal.event.on('save', function (gallery_modal, $image) {\n            // add selected images to summernote editor\n            _this.context.invoke(\n                'editor.pasteHTML',\n                '<img src=\"' + $image.attr('src') + '\" alt=\"' + ($image.attr('alt') || \"\") + '\" />'\n            );\n        });\n\n        this.modal.event.on('scrollBottom', function (gallery_modal) {\n            if (_this.modal.options.loadOnScroll) {\n                _this.data_manager.fetchNext();\n            }\n        });\n\n        this.modal.event.on('close', function (gallery_modal) {\n            _this.data_manager.init();\n            _this.modal.clearContent();\n        });\n    }\n\n    createButton() {\n        var _this = this;\n\n        var button = $.summernote.ui.button({\n            contents: this.options.button_label,\n            tooltip: this.options.tooltip,\n            click: function() {\n                _this.openGallery();\n            }\n        });\n\n        // create jQuery object from button instance.\n        return button.render();\n    }\n\n    attachDataEvents() {\n        var _this = this;\n\n        this.data_manager.event\n        .on('beforeFetch', function () {\n            _this.modal.showLoading();\n        })\n        .on('fetch', function (data, page, link) {\n            _this.modal.addImages(data, page);\n\n            setTimeout(function () {\n                if (_this.modal.options.loadOnScroll && !_this.modal.imagesContainerHasScroll()) {\n                    // The loadOnScroll wont work if the images container doesn't have the scroll displayed,\n                    // so we need to keep loading the images until the scroll shows.\n                    _this.data_manager.fetchNext();\n                }\n            }, 2000)\n        })\n        .on('afterFetch', function () {\n            _this.modal.hideLoading();\n        })\n        .on('error', function (error) {\n            _this.modal.showError(error, true);\n        });\n    }\n\n    openGallery() {\n        this.attachDataEvents();\n        this.data_manager.fetchData();\n        this.modal.open();\n    }\n}","import GalleryPlugin from './Module'\n\nvar gallery_plugin = new GalleryPlugin({\n    name: 'gallery',\n    tooltip: 'Gallery',\n});\n\n// add the plugin to summernote\n$.extend($.summernote.plugins, gallery_plugin.getPlugin());","import SummernoteGallery from './SummernoteGallery'\n\nexport default class GalleryPlugin {\n    constructor(options) {\n        this.options = options;\n    }\n\n    getPlugin() {\n        var plugin = {};\n        var _this = this;\n\n        plugin[this.options.name] = function(context) {\n            var summernote_gallery = new SummernoteGallery(_this.options);\n\n            // add gallery button\n            context.memo('button.' + summernote_gallery.options.name, summernote_gallery.createButton());\n\n            this.events = {\n                'summernote.keyup': function(we, e)\n                {\n                    summernote_gallery.saveLastFocusedElement();\n                }\n            };\n\n            this.initialize = function() {\n                summernote_gallery.initGallery(context);\n            };\n        }\n\n        return plugin;\n    }\n}"],"sourceRoot":""}